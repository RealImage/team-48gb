openapi: 3.0.0
info:
  title: Campaign Management API
  description: API for managing campaigns with MongoDB backend
  version: 1.0.0
  contact:
    name: API Support
servers:
  - url: http://localhost:8080
    description: Development server

paths:
  /v1/campaign:
    post:
      summary: Create a new campaign
      description: Creates a new campaign with the provided details
      operationId: createCampaign
      tags:
        - Campaigns
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCampaignRequest"
            example:
              template_id: "123e4567-e89b-12d3-a456-426614174000"
              city: "New York"
              slots: ["morning", "afternoon"]
              days: ["monday", "wednesday", "friday"]
              source_url: "https://example.com/campaign"
              start_date: "2025-11-21T00:00:00Z"
              end_date: "2025-12-31T23:59:59Z"
      responses:
        "201":
          description: Campaign created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CampaignResponse"
              example:
                _id: "673e5f9a1c9d440000a1b2c3"
                template_id: "123e4567-e89b-12d3-a456-426614174000"
                city: "New York"
                slots: ["morning", "afternoon"]
                days: ["monday", "wednesday", "friday"]
                source_url: "https://example.com/campaign"
                start_date: "2025-11-21T00:00:00Z"
                end_date: "2025-12-31T23:59:59Z"
                created_at: "2025-11-21T10:30:00Z"
                updated_at: "2025-11-21T10:30:00Z"
        "400":
          description: Invalid request body or validation error
          content:
            text/plain:
              schema:
                type: string
                example: "Invalid request body"
        "500":
          description: Internal server error
          content:
            text/plain:
              schema:
                type: string
                example: "Failed to create campaign"

components:
  schemas:
    CreateCampaignRequest:
      type: object
      required:
        - template_id
        - city
        - slots
        - days
        - source_url
        - start_date
        - end_date
      properties:
        template_id:
          type: string
          format: uuid
          description: UUID of the campaign template
          example: "123e4567-e89b-12d3-a456-426614174000"
        city:
          type: string
          description: City where the campaign will run
          example: "New York"
        slots:
          type: array
          items:
            type: string
          minItems: 1
          description: Time slots for the campaign
          example: ["morning", "afternoon"]
        days:
          type: array
          items:
            type: string
          minItems: 1
          description: Days of the week for the campaign
          example: ["monday", "wednesday", "friday"]
        source_url:
          type: string
          format: uri
          description: Source URL for the campaign
          example: "https://example.com/campaign"
        start_date:
          type: string
          format: date-time
          description: Campaign start date and time
          example: "2025-11-21T00:00:00Z"
        end_date:
          type: string
          format: date-time
          description: Campaign end date and time (must be after start_date)
          example: "2025-12-31T23:59:59Z"

    CampaignResponse:
      type: object
      properties:
        _id:
          type: string
          description: MongoDB ObjectID as hex string
          example: "673e5f9a1c9d440000a1b2c3"
        template_id:
          type: string
          format: uuid
          description: UUID of the campaign template
          example: "123e4567-e89b-12d3-a456-426614174000"
        city:
          type: string
          description: City where the campaign is running
          example: "New York"
        slots:
          type: array
          items:
            type: string
          description: Time slots for the campaign
          example: ["morning", "afternoon"]
        days:
          type: array
          items:
            type: string
          description: Days of the week for the campaign
          example: ["monday", "wednesday", "friday"]
        source_url:
          type: string
          format: uri
          description: Source URL for the campaign
          example: "https://example.com/campaign"
        start_date:
          type: string
          format: date-time
          description: Campaign start date and time
          example: "2025-11-21T00:00:00Z"
        end_date:
          type: string
          format: date-time
          description: Campaign end date and time
          example: "2025-12-31T23:59:59Z"
        created_at:
          type: string
          format: date-time
          description: Timestamp when the campaign was created
          example: "2025-11-21T10:30:00Z"
        updated_at:
          type: string
          format: date-time
          description: Timestamp when the campaign was last updated
          example: "2025-11-21T10:30:00Z"

tags:
  - name: Campaigns
    description: Campaign management operations
